var token="1";$(function(){""!==token?$("#login-form").modal({backdrop:"static",keyboard:!1}):App.start(token)});var App={start:function(){App.init()},init:function(){Global.registerHandlebarHelpers(),Template.showPlaces(),Template.init()&&$.each(Map.positions,function(e,t){var n=$(t.id+"-template"),r=$(t.id);n.length&&Data.get(null,null,n,r,null)})}},Template={init:function(){var e=!1;return $("#templates").children().length?(console.log("template exists!"),e=!0):$.ajax({url:Map.templates,async:!1,success:function(t){$("#templates").append(t),e=!0}}),e},showPlaces:function(){$.each(Map.places,function(e,t){$(t).length&&$(t).removeClass("hide")})},compile:function(e,t,n){var r=t.html(),t=Handlebars.compile(r),a=t(e);n.html(a),Template.afterCompile(a)},afterCompile:function(e){-1!==e.indexOf('"nano')&&$(".nano").nanoScroller({flash:!0,preventPageScrolling:!0,tabIndex:0})}},Data={get:function(e,t,n,r){var t=[];Template.compile(t,n,r)},post:function(){return!1},put:function(){return!1}},Location={goBack:function(){Location.redirect(!0)},redirect:function(e){return"undefined"==typeof e?!1:(window.location.href=e,!0)},refresh:function(){location.reload()}},Global={isInt:function(e){return"number"==typeof parseInt(e)&&isFinite(parseInt(e))&&parseInt(e)%1===0},getVal:function(e,t,n){if(e.length){var r=e.attr(t);return"undefined"==typeof r&&(r=n),r}return!1},ucfirst:function(e){return"undefined"!=typeof e?e.charAt(0).toUpperCase()+e.slice(1):e},cleanText:function(e){return e.replace(/[^a-zA-Z\u0600-\u06FF\s]/gi,"")},registerHandlebarHelpers:function(){Handlebars.registerHelper("times",function(e,t){for(var n="",r=0;e>r;++r)n+=t.fn(r);return n}),Handlebars.registerHelper("date",function(e){var t="";("undefined"==typeof e||""===e)&&(e=0);var n=new Date;n.setDate(n.getDate()+e);var r=n.getDate(),a=n.getMonth()+1,i=n.getFullYear();return 10>r&&(r="0"+r),10>a&&(a="0"+a),t=a+"/"+r+"/"+i}),Handlebars.registerHelper("date2",function(e){var t="";("undefined"==typeof e||""===e)&&(e=0);var n=new Date;n.setDate(n.getDate()+e);var r=n.getDate(),a=n.getMonth()+1,i=n.getFullYear();return 10>r&&(r="0"+r),10>a&&(a="0"+a),t=i+"-"+a+"-"+r}),Handlebars.registerHelper("htimes",function(e,t){for(var n="",r=1;e+1>r;++r)n+=t.fn(r);return n}),Handlebars.registerHelper("for",function(e,t,n,r){for(var a="",i=e;t>i;i+=n)a+=r.fn(i);return a}),Handlebars.registerHelper("ifCond",function(e,t,n){return e===t?n.fn(this):n.inverse(this)}),Handlebars.registerHelper("ifActive",function(e){var t="undefined"==typeof Location.parts[2]?0:Location.parts[2];return parseInt(e)===parseInt(t)?"grey-cascade":"btn-default"}),Handlebars.registerHelper("cycle",function(e,t){var n=e.split(" ");return n[t.data.index%(n.length+1)]}),window.Handlebars.registerHelper("select",function(e,t){var n=$("<select />").html(t.fn(this));return n.find("[value="+e+"]").attr({selected:"selected"}),n.html()})}},Map={templates:"data/templates.html",services:{base:"http://192.168.103.208/Assignment.svc/",login:"login"},places:[".wrapper"],positions:{user:{id:"#user",template:"user"},search:{id:"#search",template:"search"},results:{id:"#results",template:"results"},conversation:{id:"#conversation",template:"conversation"}}};$(document).on("click","#login-anchor",function(e){return $.ajax({url:Map.services.base+Map.services.login,data:$("#login-form").serialize(),success:function(e){alert(e)}}),!1});
